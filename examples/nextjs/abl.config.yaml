directories:
  src: ./src
  tests: ./tests

models:
  builder: gemini-2.5-flash
  verifier: gemini-2.5-flash

builder_commands:
  health_check: 
    command: "cd src && npm run lint && npx tsc --noEmit"
    description: "Ensure zero lint errors and type safety"

verifier_commands:
  seed: 
    command: "cd src && npm run db:seed"
    description: "Reset and seed the database to a known state"
  
  start_dev: 
    command: "cd src && setsid npm run dev > ../.abl/logs/dev.log 2>&1 & echo $! > ../.abl/logs/dev.pid && sleep 5"
    description: "Start Next.js in background and save PID"
  
  stop_dev: 
    command: "kill $(cat .abl/logs/dev.pid) 2>/dev/null || true && rm -f .abl/logs/dev.pid"
    description: "Gracefully terminate the dev server"
  
  db_query:
    command: "psql $DATABASE_URL -t -A -f query.sql"
    description: "Executes SQL in query.sql. Used to verify physical DB state."

loop:
  max_verifier_iterations: 5